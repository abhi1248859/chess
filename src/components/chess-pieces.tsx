import type { FC } from 'react';
import type { Piece } from '@/lib/chess-logic';
import { cn } from '@/lib/utils';

interface ChessPieceProps {
  piece: Piece;
  className?: string;
}

const pieceMap = {
  w: {
    k: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#FFF" fillRule="evenodd" stroke="#000" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22.5 11.63V6M20 8h5" strokeLinejoin="miter"/><path d="M22.5 25s4.5-7.5 3-10.5c0 0-1.5-3-3-3s-3 3-3 3c-1.5 3 3 10.5 3 10.5" fill="#FFF" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M11.5 37c5.5 3.5 16.5 3.5 22 0v-7s-2 1.5-11 1.5-11-1.5-11-1.5v7z" strokeLinecap="butt"/><path d="M11.5 30c5.5-3 16.5-3 22 0" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M11.5 30s-1.5-2.5-1.5-4c0-2 1.5-2.5 1.5-4 0-2-1.5-2.5-1.5-4 0-2 1.5-2 1.5-3.5s-1.5-2.5-1.5-4c0-2 1.5-2.5 1.5-4" strokeLinecap="butt"/><path d="M33.5 30s1.5-2.5 1.5-4c0-2-1.5-2.5-1.5-4 0-2 1.5-2.5 1.5-4 0-2-1.5-2-1.5-3.5s1.5-2.5 1.5-4c0-2-1.5-2.5-1.5-4" strokeLinecap="butt"/><path d="M11.5 37.5s-2-1-2-3.5c0-2.5 2-3.5 2-3.5" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M33.5 37.5s2-1 2-3.5c0-2.5-2-3.5-2-3.5" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M14 14.5s-1.5 2.5-1.5 4" strokeLinecap="butt"/><path d="M31 14.5s1.5 2.5 1.5 4" strokeLinecap="butt"/></g></svg>,
    q: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#FFF" fillRule="evenodd" stroke="#000" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M13 13.5s-1.5-3 0-4.5 3.5-2.5 6-1.5c2.5 1 2.5 4 2.5 4" strokeLinejoin="miter"/><path d="M15.5 13s-1.5-3 0-4.5c1.5-1.5 3.5-1.5 5 .5s1.5 4 1.5 4" strokeLinejoin="miter"/><path d="M18 13.5s-1.5-3 0-4.5c1.5-1.5 3.5-1.5 5 .5s1.5 4 1.5 4" strokeLinejoin="miter"/><path d="M20.5 13s-1.5-3 0-4.5c1.5-1.5 3.5-1.5 5 .5s1.5 4 1.5 4" strokeLinejoin="miter"/><path d="M22.5 13.5s-1.5-3 0-4.5 3.5-2.5 6-1.5c2.5 1 2.5 4 2.5 4" strokeLinejoin="miter"/><path d="M11.5 14C5 14 5 19 10 25.5l12.5 11.5 12.5-11.5C40 19 40 14 33.5 14H11.5z"/><path d="M11.5 37c5.5 3.5 16.5 3.5 22 0v-7s-2 1.5-11 1.5-11-1.5-11-1.5v7z"/><path d="M11.5 30c5.5-3 16.5-3 22 0" strokeLinejoin="miter"/></g></svg>,
    r: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#FFF" fillRule="evenodd" stroke="#000" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M9 39h27v-3H9v3zM12.5 32l1.5-2.5h17l1.5 2.5h-20zM12 36v-4h21v4H12z"/><path d="M14 29.5v-13h17v13H14z" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M14 16.5L11 14h23l-3 2.5H14zM11 14V9h4v2h5V9h5v2h5V9h4v5H11z" strokeLinecap="butt"/></g></svg>,
    b: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#FFF" fillRule="evenodd" stroke="#000" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.43-13.5-2-3.39 2.43-10.11 1.03-13.5 2 0 0-1.65.54-3 2-.68.97-1.65.99-3-.5z"/><path d="M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z"/><path d="M25 8.5c-1.5-2-5-2-6.5 0-1 1.5-1 4.5-1 4.5-.5 3.5 2.5 6 2.5 6s3-2.5 2.5-6c0 0 .5-3-1-4.5zM22.5 25l-.5-2.5" strokeLinecap="butt" strokeLinejoin="miter"/></g></svg>,
    n: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#FFF" fillRule="evenodd" stroke="#000" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10c10.5 1 11.5 8 11.5 10.5 0 2-1.5 4-4.5 4-2.5 0-4-1.5-4-4 0-2 1.5-3.5 1.5-6.5-1.5 1.5-3 3-4.5 5.5-1 2-2.5 3-2.5 5 0 2.5 2.5 4.5 2.5 4.5H10v-5C10 23 12 21 12 18c0-2-1-3-1-5 0-2.5 2-4 2.5-4s2 1.5 2 4-1 2.5-1 5c0 2.5 2.5 5 2.5 5" strokeLinecap="butt"/><path d="M14.5 24.5s1 2 2.5 2 2.5-2 2.5-2" strokeLinecap="butt"/><path d="M11.5 30c5.5-3 16.5-3 22 0" strokeLinejoin="miter"/><path d="M11.5 37c5.5 3.5 16.5 3.5 22 0v-7s-2 1.5-11 1.5-11-1.5-11-1.5v7z" strokeLinecap="butt"/><path d="M14.5 14.5c0-2.5-2-4-2.5-4s-2 1.5-2 4 1 2.5 1 5" strokeLinecap="butt"/></g></svg>,
    p: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#FFF" fillRule="evenodd" stroke="#000" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22.5 9c-2.21 0-4 1.79-4 4 0 2.21 1.79 4 4 4s4-1.79 4-4-1.79-4-4-4z" strokeLinecap="butt"/><path d="M22.5 36c4.42 0 8-3.58 8-8 0-4.42-3.58-8-8-8-4.42 0-8 3.58-8 8 0 4.42 3.58 8 8 8z" strokeLinecap="butt"/><path d="M22.5 28v8" strokeLinecap="butt"/><path d="M22.5 17v4" strokeLinecap="butt"/><path d="M20.5 15h4" strokeLinecap="butt"/><path d="M14.5 28h16" strokeLinecap="butt"/></g></svg>
  },
  b: {
    k: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#000" fillRule="evenodd" stroke="#FFF" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22.5 11.63V6M20 8h5" strokeLinejoin="miter"/><path d="M22.5 25s4.5-7.5 3-10.5c0 0-1.5-3-3-3s-3 3-3 3c-1.5 3 3 10.5 3 10.5" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M11.5 37c5.5 3.5 16.5 3.5 22 0v-7s-2 1.5-11 1.5-11-1.5-11-1.5v7z" strokeLinecap="butt"/><path d="M11.5 30c5.5-3 16.5-3 22 0" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M11.5 30s-1.5-2.5-1.5-4c0-2 1.5-2.5 1.5-4 0-2-1.5-2.5-1.5-4 0-2 1.5-2 1.5-3.5s-1.5-2.5-1.5-4c0-2 1.5-2.5 1.5-4" strokeLinecap="butt"/><path d="M33.5 30s1.5-2.5 1.5-4c0-2-1.5-2.5-1.5-4 0-2 1.5-2.5 1.5-4 0-2-1.5-2-1.5-3.5s1.5-2.5 1.5-4c0-2-1.5-2.5-1.5-4" strokeLinecap="butt"/><path d="M11.5 37.5s-2-1-2-3.5c0-2.5 2-3.5 2-3.5" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M33.5 37.5s2-1 2-3.5c0-2.5-2-3.5-2-3.5" strokeLinecap="butt" strokeLinejoin="miter"/><path d="M14 14.5s-1.5 2.5-1.5 4" strokeLinecap="butt"/><path d="M31 14.5s1.5 2.5 1.5 4" strokeLinecap="butt"/></g></svg>,
    q: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#000" fillRule="evenodd" stroke="#FFF" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M13 13.5s-1.5-3 0-4.5 3.5-2.5 6-1.5c2.5 1 2.5 4 2.5 4" strokeLinejoin="miter"/><path d="M15.5 13s-1.5-3 0-4.5c1.5-1.5 3.5-1.5 5 .5s1.5 4 1.5 4" strokeLinejoin="miter"/><path d="M18 13.5s-1.5-3 0-4.5c1.5-1.5 3.5-1.5 5 .5s1.5 4 1.5 4" strokeLinejoin="miter"/><path d="M20.5 13s-1.5-3 0-4.5c1.5-1.5 3.5-1.5 5 .5s1.5 4 1.5 4" strokeLinejoin="miter"/><path d="M22.5 13.5s-1.5-3 0-4.5 3.5-2.5 6-1.5c2.5 1 2.5 4 2.5 4" strokeLinejoin="miter"/><path d="M11.5 14C5 14 5 19 10 25.5l12.5 11.5 12.5-11.5C40 19 40 14 33.5 14z"/><path d="M11.5 37c5.5 3.5 16.5 3.5 22 0v-7s-2 1.5-11 1.5-11-1.5-11-1.5v7z"/><path d="M11.5 30c5.5-3 16.5-3 22 0" strokeLinejoin="miter"/></g></svg>,
    r: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#000" fillRule="evenodd" stroke="#FFF" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M9 39h27v-3H9v3zM12.5 32l1.5-2.5h17l1.5 2.5h-20zM12 36v-4h21v4H12z"/><path d="M14 29.5v-13h17v13H14z" strokeLinejoin="miter"/><path d="M14 16.5L11 14h23l-3 2.5H14zM11 14V9h4v2h5V9h5v2h5V9h4v5H11z"/></g></svg>,
    b: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#000" fillRule="evenodd" stroke="#FFF" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.43-13.5-2-3.39 2.43-10.11 1.03-13.5 2 0 0-1.65.54-3 2-.68.97-1.65.99-3-.5z"/><path d="M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z"/><path d="M25 8.5c-1.5-2-5-2-6.5 0-1 1.5-1 4.5-1 4.5-.5 3.5 2.5 6 2.5 6s3-2.5 2.5-6c0 0 .5-3-1-4.5zM22.5 25l-.5-2.5" strokeLinejoin="miter"/></g></svg>,
    n: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#000" fillRule="evenodd" stroke="#FFF" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10c10.5 1 11.5 8 11.5 10.5 0 2-1.5 4-4.5 4-2.5 0-4-1.5-4-4 0-2 1.5-3.5 1.5-6.5-1.5 1.5-3 3-4.5 5.5-1 2-2.5 3-2.5 5 0 2.5 2.5 4.5 2.5 4.5H10v-5C10 23 12 21 12 18c0-2-1-3-1-5 0-2.5 2-4 2.5-4s2 1.5 2 4-1 2.5-1 5c0 2.5 2.5 5 2.5 5"/><path d="M14.5 24.5s1 2 2.5 2 2.5-2 2.5-2"/><path d="M11.5 30c5.5-3 16.5-3 22 0" strokeLinejoin="miter"/><path d="M11.5 37c5.5 3.5 16.5 3.5 22 0v-7s-2 1.5-11 1.5-11-1.5-11-1.5v7z"/><path d="M14.5 14.5c0-2.5-2-4-2.5-4s-2 1.5-2 4 1 2.5 1 5"/></g></svg>,
    p: (p: {className?: string}) => <svg {...p} viewBox="0 0 45 45"><g fill="#000" fillRule="evenodd" stroke="#FFF" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M22.5 9c-2.21 0-4 1.79-4 4 0 2.21 1.79 4 4 4s4-1.79 4-4-1.79-4-4-4z"/><path d="M22.5 36c4.42 0 8-3.58 8-8 0-4.42-3.58-8-8-8-4.42 0-8 3.58-8 8 0 4.42 3.58 8 8 8z"/><path d="M22.5 28v8"/><path d="M22.5 17v4"/><path d="M20.5 15h4"/><path d="M14.5 28h16"/></g></svg>
  }
};

export const ChessPiece: FC<ChessPieceProps> = ({ piece, className }) => {
  if (!piece) return null;
  const PieceComponent = pieceMap[piece.color][piece.type];
  if (!PieceComponent) return null;
  
  return <PieceComponent className={cn("w-full h-full p-1 drop-shadow-lg", className)} />;
};
